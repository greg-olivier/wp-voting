jQuery(document).ready(function ($) {    jQuery('.wp_voting_contest-id').each(function () {        var arr = jQuery(this).attr('class').split(" ");        var arrClassName = arr[2].split("-");        var idContest = arrClassName[1];        jQuery(this).find('.wp_voting_survey-item').each(function () {            jQuery(this).find('#wp_voting_survey-vote-button').click(function () {                var wp_voting_item = jQuery(this).parent().parent().parent().parent().parent();                jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_processing').addClass('wp_voting_process_flex');                var data = {                    'action': 'wp_voting_vote',                    'item_id': jQuery(wp_voting_item).find('#wp_voting_survey-item-id').val(),                    'contest_id': jQuery(wp_voting_item).find('#wp_voting_contest-id').val(), // We pass php values differently!                    'token': getCookieValue('wPvO')                };                jQuery.post(wp_voting_ajax_obj.ajax_url, data, function (response) {                    var wp_voting_json = jQuery.parseJSON(response);                    if (wp_voting_json.fail && wp_voting_json.fail === true) {                        jQuery(this).find('.wp_voting_processing').removeClass('wp_voting_process_flex');                        jQuery(this).find('.wp_voting_fail').addClass('wp_voting_process_flex');                        setTimeout(function () {                            jQuery(this).find('.wp_voting_fail').removeClass('wp_voting_process_flex');                        }, 3000);                        return;                    } else {                        // CONTEST Item Same Height                        // Div class wp_voting_survey-box-under                        jQuery(wp_voting_item).parent().find('.wp_voting_survey-item').each(function () {                            jQuery(this).find('#wp_voting_survey-vote-button').val('Voted');                            jQuery(this).find('#wp_voting_survey-vote-button').attr('disabled', 'yes');                            jQuery(this).find('#wp_voting_survey-vote-button').fadeOut().promise().done(function () {                                var arrHeight = [];                                var surveyDivBox = jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_survey-box-under');                                surveyDivBox.each(function () {                                    arrHeight.push(jQuery(this).height());                                });                                var minHeight = 2000;                                for (var i in arrHeight) {                                    if (arrHeight[i] < minHeight) {                                        minHeight = arrHeight[i];                                    }                                }                                surveyDivBox.each(function () {                                    if (jQuery(this).height() != minHeight) {                                        jQuery(this).height(minHeight);                                    }                                });                            });                        });                    }                    var idModal = ".wp_voting_contest-" + idContest;                    jQuery(idModal).each(function () {                        jQuery(this).find(".wp_voting_button-modal").addClass('wp_voting_pull-right-disabled');                    });                    jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_processing').removeClass('wp_voting_process_flex');                    jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_success').addClass('wp_voting_process_flex');                    setTimeout(function () {                        jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_success').removeClass('wp_voting_process_flex');                        jQuery(wp_voting_item).parent().parent().parent().find('.wp_voting_grid.wp_voting_survey-stage').html('<span class="wp_voting_stage wp_voting_ended wp_voting_active">Vote enregistr√©</span>');                    }, 3000);                });            });        });    });    jQuery('.wp_voting_button-modal').each(function () {        var idNominated = jQuery(this).attr('data-rel');        var target = 'wp_voting_survey-vote-button-' + idNominated;        jQuery(this).click(function () {            jQuery("[name='" + target + "']").click();            jQuery(this).parent().parent().parent().parent().find('.wp_voting_modal-close-button').click();        });    });});function getCookieValue(a) {    var b = document.cookie.match('(^|;)\\s*' + a + '\\s*=\\s*([^;]+)');    return b ? b.pop() : '';}